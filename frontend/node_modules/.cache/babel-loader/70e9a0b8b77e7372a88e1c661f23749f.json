{"ast":null,"code":"import _classCallCheck from\"/Users/alexandrkatsuro/Downloads/Yandex_practicum/dev/project-work-15/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/alexandrkatsuro/Downloads/Yandex_practicum/dev/project-work-15/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{BASE_URL}from\"./Url\";var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this._baseUrl=baseUrl;this._userUrl=\"\".concat(this._baseUrl,\"/users/me\");this._cardsUrl=\"\".concat(this._baseUrl,\"/cards\");this._avatarUrl=\"\".concat(this._baseUrl,\"/users/me/avatar\");this._likesUrl=\"\".concat(this._baseUrl,\"/cards/cardId/likes\");// this._headers = headers;\n// this._token = headers['authorization'];\n}_createClass(Api,[{key:\"_getResponseData\",value:function _getResponseData(res){if(!res.ok){return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}return res.json();}//////// загружаем данные пользователя с сервера\n},{key:\"getProfileData\",value:function getProfileData(){var _this=this;return fetch(this._userUrl,{// headers: this._headers,\nheaders:{authorization:\"Bearer \".concat(localStorage.getItem('token'))}// credentials: 'include',\n}).then(function(res){return _this._getResponseData(res);});}//////// сохраняем данные пользователя (профиль) на сервере\n},{key:\"setUserInfo\",value:function setUserInfo(_ref2){var _this2=this;var name=_ref2.name,about=_ref2.about;return fetch(this._userUrl,{method:\"PATCH\",// headers: this._headers,\nheaders:{authorization:\"Bearer \".concat(localStorage.getItem('token')),'Content-Type':'application/json'},// credentials: 'include',\nbody:JSON.stringify({name:name,about:about})}).then(function(res){return _this2._getResponseData(res);});}////////// сохраняем аватар пользователя (профиль) на сервере\n},{key:\"setUserAvatar\",value:function setUserAvatar(src){var _this3=this;return fetch(\"\".concat(this._userUrl,\"/avatar\"),{method:\"PATCH\",// headers: this._headers,\nheaders:{authorization:\"Bearer \".concat(localStorage.getItem('token')),'Content-Type':'application/json'},// credentials: 'include',\nbody:JSON.stringify({avatar:src})}).then(function(res){return _this3._getResponseData(res);});}//////// загружаем карточки с сервера\n},{key:\"getInitialCards\",value:function getInitialCards(){var _this4=this;return fetch(this._cardsUrl,{// headers: this._headers,\nheaders:{authorization:\"Bearer \".concat(localStorage.getItem('token'))}// credentials: 'include',\n}).then(function(res){return _this4._getResponseData(res);});}//////// добавляем новую карточку на сервер\n},{key:\"postNewCard\",value:function postNewCard(_ref3){var _this5=this;var name=_ref3.name,link=_ref3.link;return fetch(this._cardsUrl,{method:\"POST\",// headers: this._headers,\nheaders:{authorization:\"Bearer \".concat(localStorage.getItem('token')),'Content-Type':'application/json'},// credentials: 'include',\nbody:JSON.stringify({name:name,link:link})}).then(function(res){return _this5._getResponseData(res);});}///////удаление карточки пользователя с сервера\n},{key:\"deleteCard\",value:function deleteCard(id){var _this6=this;console.log(id);return fetch(\"\".concat(this._cardsUrl,\"/\").concat(id),{method:\"DELETE\",// headers: this._headers,\nheaders:{authorization:\"Bearer \".concat(localStorage.getItem('token'))}// credentials: 'include',\n}).then(function(res){return _this6._getResponseData(res);});}//////////установка лайка карточке\n},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isNotLiked){var _this7=this;return fetch(\"\".concat(this._cardsUrl,\"/\").concat(cardId,\"/likes\"),{method:isNotLiked?\"PUT\":\"DELETE\",// headers: this._headers,\nheaders:{authorization:\"Bearer \".concat(localStorage.getItem('token'))}// credentials: 'include',\n}).then(function(res){return _this7._getResponseData(res);});}}]);return Api;}();// const api = new Api({\n//   baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-50\",\n//   headers: {\n//     authorization: \"0cd386ae-1830-42e7-aefa-1c5dfe1b78a1\",\n//     \"Content-Type\": \"application/json\",\n//   },\n// });\nvar api=new Api({baseUrl:BASE_URL,headers:{authorization:\"Bearer \".concat(localStorage.getItem('token')),'Content-Type':'application/json'}});export default api;","map":{"version":3,"names":["BASE_URL","Api","baseUrl","headers","_baseUrl","_userUrl","_cardsUrl","_avatarUrl","_likesUrl","res","ok","Promise","reject","status","json","fetch","authorization","localStorage","getItem","then","_getResponseData","name","about","method","body","JSON","stringify","src","avatar","link","id","console","log","cardId","isNotLiked","api"],"sources":["/Users/alexandrkatsuro/Downloads/Yandex_practicum/dev/project-work-15/react-mesto-api-full/frontend/src/utils/Api.js"],"sourcesContent":["import { BASE_URL } from \"./Url\";\n\nclass Api {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    this._userUrl = `${this._baseUrl}/users/me`;\n    this._cardsUrl = `${this._baseUrl}/cards`;\n    this._avatarUrl = `${this._baseUrl}/users/me/avatar`;\n    this._likesUrl = `${this._baseUrl}/cards/cardId/likes`;\n    // this._headers = headers;\n    // this._token = headers['authorization'];\n  }\n\n  _getResponseData(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n    return res.json();\n  }\n\n  //////// загружаем данные пользователя с сервера\n  getProfileData() {\n    return fetch(this._userUrl, {\n      // headers: this._headers,\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('token')}`,\n      },\n      // credentials: 'include',\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //////// сохраняем данные пользователя (профиль) на сервере\n  setUserInfo({ name, about }) {\n    return fetch(this._userUrl, {\n      method: \"PATCH\",\n      // headers: this._headers,\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('token')}`,\n        'Content-Type': 'application/json'\n      },\n      // credentials: 'include',\n      body: JSON.stringify({\n        name: name,\n        about: about,\n      }),\n    }).then((res) => this._getResponseData(res));\n  }\n\n\n  ////////// сохраняем аватар пользователя (профиль) на сервере\n  setUserAvatar(src) {\n    return fetch(`${this._userUrl}/avatar`, {\n      method: \"PATCH\",\n      // headers: this._headers,\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('token')}`,\n        'Content-Type': 'application/json'\n      },\n      // credentials: 'include',\n      body: JSON.stringify({\n        avatar: src,\n      }),\n    }).then((res) => this._getResponseData(res));\n  }\n\n\n  //////// загружаем карточки с сервера\n  getInitialCards() {\n    return fetch(this._cardsUrl, {\n      // headers: this._headers,\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('token')}`,\n      },\n      // credentials: 'include',\n    }).then((res) => this._getResponseData(res));\n  }\n\n    //////// добавляем новую карточку на сервер\n    postNewCard({ name, link }) {\n      return fetch(this._cardsUrl, {\n        method: \"POST\",\n        // headers: this._headers,\n        headers: {\n          authorization: `Bearer ${localStorage.getItem('token')}`,\n          'Content-Type': 'application/json'\n        },\n        // credentials: 'include',\n        body: JSON.stringify({\n          name: name,\n          link: link,\n        }),\n      }).then((res) => this._getResponseData(res));\n    }\n\n  ///////удаление карточки пользователя с сервера\n  deleteCard(id) {\n    console.log(id);\n    return fetch(`${this._cardsUrl}/${id}`, {\n      method: \"DELETE\",\n      // headers: this._headers,\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('token')}`,\n      },\n      // credentials: 'include',\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //////////установка лайка карточке\n  changeLikeCardStatus(cardId, isNotLiked) {\n    return fetch(`${this._cardsUrl}/${cardId}/likes`, {\n      method: isNotLiked ? \"PUT\" : \"DELETE\",\n      // headers: this._headers,\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('token')}`,\n      },\n      // credentials: 'include',\n    }).then((res) => this._getResponseData(res));\n  }\n\n}\n\n// const api = new Api({\n//   baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-50\",\n//   headers: {\n//     authorization: \"0cd386ae-1830-42e7-aefa-1c5dfe1b78a1\",\n//     \"Content-Type\": \"application/json\",\n//   },\n// });\n\nconst api = new Api({\n  baseUrl: BASE_URL,\n  headers: {\n    authorization: `Bearer ${localStorage.getItem('token')}`,\n    'Content-Type': 'application/json'\n  },\n});\n\nexport default api;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}