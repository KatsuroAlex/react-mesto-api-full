{"ast":null,"code":"import { BASE_URL } from \"./Url\";\n\nclass Api {\n  constructor(_ref) {\n    let {\n      baseUrl,\n      headers\n    } = _ref;\n    this._baseUrl = baseUrl;\n    this._userUrl = `${this._baseUrl}/users/me`;\n    this._cardsUrl = `${this._baseUrl}/cards`; // this._avatarUrl = `${this._baseUrl}/users/me/avatar`;\n    // this._likesUrl = `${this._baseUrl}/cards/cardId/likes`;\n    // this._headers = headers;\n\n    this._token = headers['authorization'];\n  }\n\n  _getResponseData(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n\n    return res.json();\n  } //////// загружаем данные пользователя с сервера\n\n\n  getProfileData() {\n    return fetch(this._userUrl, {\n      // headers: this._headers,\n      headers: {\n        authorization: this._token\n      },\n      credentials: 'include'\n    }).then(res => this._getResponseData(res));\n  } //////// сохраняем данные пользователя (профиль) на сервере\n\n\n  setUserInfo(_ref2) {\n    let {\n      name,\n      about\n    } = _ref2;\n    return fetch(this._userUrl, {\n      method: \"PATCH\",\n      // headers: this._headers,\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include',\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    }).then(res => this._getResponseData(res));\n  } ////////// сохраняем аватар пользователя (профиль) на сервере\n\n\n  setUserAvatar(src) {\n    return fetch(this._avatarUrl, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: src\n      })\n    }).then(res => this._getResponseData(res));\n  } //////// загружаем карточки с сервера\n\n\n  getInitialCards() {\n    return fetch(this._cardsUrl, {\n      // headers: this._headers,\n      headers: {\n        authorization: this._token\n      },\n      credentials: 'include'\n    }).then(res => this._getResponseData(res));\n  } //////// добавляем новую карточку на сервер\n\n\n  postNewCard(_ref3) {\n    let {\n      name,\n      link\n    } = _ref3;\n    return fetch(this._cardsUrl, {\n      method: \"POST\",\n      // headers: this._headers,\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include',\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    }).then(res => this._getResponseData(res));\n  } ///////удаление карточки пользователя с сервера\n\n\n  deleteCard(id) {\n    console.log(id);\n    return fetch(`${this._cardsUrl}/${id}`, {\n      method: \"DELETE\",\n      // headers: this._headers,\n      headers: {\n        authorization: this._token\n      },\n      credentials: 'include'\n    }).then(res => this._getResponseData(res));\n  } //////////установка лайка карточке\n\n\n  changeLikeCardStatus(cardId, isNotLiked) {\n    return fetch(`${this._cardsUrl}/${cardId}/likes`, {\n      method: isNotLiked ? \"PUT\" : \"DELETE\",\n      // headers: this._headers,\n      headers: {\n        authorization: this._token\n      },\n      credentials: 'include'\n    }).then(res => this._getResponseData(res));\n  }\n\n} // const api = new Api({\n//   baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-50\",\n//   headers: {\n//     authorization: \"0cd386ae-1830-42e7-aefa-1c5dfe1b78a1\",\n//     \"Content-Type\": \"application/json\",\n//   },\n// });\n\n\nconst api = new Api({\n  baseUrl: BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nexport default api;","map":{"version":3,"names":["BASE_URL","Api","constructor","baseUrl","headers","_baseUrl","_userUrl","_cardsUrl","_token","_getResponseData","res","ok","Promise","reject","status","json","getProfileData","fetch","authorization","credentials","then","setUserInfo","name","about","method","body","JSON","stringify","setUserAvatar","src","_avatarUrl","_headers","avatar","getInitialCards","postNewCard","link","deleteCard","id","console","log","changeLikeCardStatus","cardId","isNotLiked","api"],"sources":["/Users/alexandrkatsuro/Downloads/Yandex_practicum/dev/project-work-15/react-mesto-api-full/frontend/src/utils/Api.js"],"sourcesContent":["import { BASE_URL } from \"./Url\";\n\nclass Api {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    this._userUrl = `${this._baseUrl}/users/me`;\n    this._cardsUrl = `${this._baseUrl}/cards`;\n    // this._avatarUrl = `${this._baseUrl}/users/me/avatar`;\n    // this._likesUrl = `${this._baseUrl}/cards/cardId/likes`;\n    // this._headers = headers;\n    this._token = headers['authorization'];\n  }\n\n  _getResponseData(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n    return res.json();\n  }\n\n  //////// загружаем данные пользователя с сервера\n  getProfileData() {\n    return fetch(this._userUrl, {\n      // headers: this._headers,\n      headers: {\n        authorization: this._token,\n      },\n      credentials: 'include',\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //////// сохраняем данные пользователя (профиль) на сервере\n  setUserInfo({ name, about }) {\n    return fetch(this._userUrl, {\n      method: \"PATCH\",\n      // headers: this._headers,\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include',\n      body: JSON.stringify({\n        name: name,\n        about: about,\n      }),\n    }).then((res) => this._getResponseData(res));\n  }\n\n\n  ////////// сохраняем аватар пользователя (профиль) на сервере\n  setUserAvatar(src) {\n    return fetch(this._avatarUrl, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: src,\n      }),\n    }).then((res) => this._getResponseData(res));\n  }\n\n\n  //////// загружаем карточки с сервера\n  getInitialCards() {\n    return fetch(this._cardsUrl, {\n      // headers: this._headers,\n      headers: {\n        authorization: this._token,\n      },\n      credentials: 'include',\n    }).then((res) => this._getResponseData(res));\n  }\n\n    //////// добавляем новую карточку на сервер\n    postNewCard({ name, link }) {\n      return fetch(this._cardsUrl, {\n        method: \"POST\",\n        // headers: this._headers,\n        headers: {\n          authorization: this._token,\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          name: name,\n          link: link,\n        }),\n      }).then((res) => this._getResponseData(res));\n    }\n\n  ///////удаление карточки пользователя с сервера\n  deleteCard(id) {\n    console.log(id);\n    return fetch(`${this._cardsUrl}/${id}`, {\n      method: \"DELETE\",\n      // headers: this._headers,\n      headers: {\n        authorization: this._token,\n      },\n      credentials: 'include',\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //////////установка лайка карточке\n  changeLikeCardStatus(cardId, isNotLiked) {\n    return fetch(`${this._cardsUrl}/${cardId}/likes`, {\n      method: isNotLiked ? \"PUT\" : \"DELETE\",\n      // headers: this._headers,\n      headers: {\n        authorization: this._token,\n      },\n      credentials: 'include',\n    }).then((res) => this._getResponseData(res));\n  }\n\n}\n\n// const api = new Api({\n//   baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-50\",\n//   headers: {\n//     authorization: \"0cd386ae-1830-42e7-aefa-1c5dfe1b78a1\",\n//     \"Content-Type\": \"application/json\",\n//   },\n// });\n\nconst api = new Api({\n  baseUrl: BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n});\n\nexport default api;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}