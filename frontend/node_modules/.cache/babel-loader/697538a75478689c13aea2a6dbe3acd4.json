{"ast":null,"code":"import _classCallCheck from\"/Users/alexandrkatsuro/Downloads/mesto-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/alexandrkatsuro/Downloads/mesto-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this._baseUrl=baseUrl;this._cardsUrl=\"\".concat(this._baseUrl,\"/cards\");this._userUrl=\"\".concat(this._baseUrl,\"/users/me\");this._avatarUrl=\"\".concat(this._baseUrl,\"/users/me/avatar\");this._likesUrl=\"\".concat(this._baseUrl,\"/cards/cardId/likes\");this._headers=headers;}_createClass(Api,[{key:\"_getResponseData\",value:function _getResponseData(res){if(!res.ok){return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}return res.json();}//////// загружаем карточки с сервера\n},{key:\"getInitialCards\",value:function getInitialCards(){var _this=this;return fetch(this._cardsUrl,{headers:this._headers}).then(function(res){return _this._getResponseData(res);});}//////// загружаем данные пользователя с сервера\n},{key:\"getProfileData\",value:function getProfileData(){var _this2=this;return fetch(this._userUrl,{headers:this._headers}).then(function(res){return _this2._getResponseData(res);});}//метод сохранения отредактированных данных пользователя на сервере\n},{key:\"setUserInfo\",value:function setUserInfo(_ref2){var _this3=this;var name=_ref2.name,about=_ref2.about;return fetch(this._userUrl,{method:'PATCH',headers:this._headers,body:JSON.stringify({name:name,about:about})}).then(function(res){return _this3._getResponseData(res);});}// //////// сохраняем данные пользователя (профиль) на сервере\n// saveProfileInfo({ name, about }) {\n//   return fetch(this._userUrl, {\n//     method: \"PATCH\",\n//     headers: this._headers,\n//     body: JSON.stringify({\n//       name: name,\n//       about: about,\n//     }),\n//   }).then((res) => this._getResponseData(res));\n// }\n// //////// сохраняем аватар пользователя (профиль) на сервере\n// saveProfileAvatar(src) {\n//   return fetch(this._avatarUrl, {\n//     method: \"PATCH\",\n//     headers: this._headers,\n//     body: JSON.stringify({\n//       avatar: src.link,\n//     }),\n//   }).then((res) => this._getResponseData(res));\n// }\n//////// добавляем новую карточку на сервер\n},{key:\"postNewCard\",value:function postNewCard(_ref3){var _this4=this;var name=_ref3.name,link=_ref3.link;return fetch(this._cardsUrl,{method:\"POST\",headers:this._headers,body:JSON.stringify({name:name,link:link})}).then(function(res){return _this4._getResponseData(res);});}///////удаление карточки пользователя с сервера\n},{key:\"deleteCard\",value:function deleteCard(id){var _this5=this;console.log(id);return fetch(\"\".concat(this._cardsUrl,\"/\").concat(id),{method:\"DELETE\",headers:this._headers}).then(function(res){return _this5._getResponseData(res);});}// ////////установка лайка карточке\n// setLike(cardId) {\n//   return fetch(`${this._cardsUrl}/${cardId}/likes`, {\n//     method: \"PUT\",\n//     headers: this._headers,\n//   }).then((res) => this._getResponseData(res));\n// }\n// ////////удаление лайка с карточки\n// removeLike(cardId) {\n//   return fetch(`${this._cardsUrl}/${cardId}/likes`, {\n//     method: \"DELETE\",\n//     headers: this._headers,\n//   }).then((res) => this._getResponseData(res));\n// }\n},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isNotLiked){var _this6=this;return fetch(\"\".concat(this._cardsUrl,\"/\").concat(cardId,\"/likes\"),{method:isNotLiked?\"PUT\":\"DELETE\",headers:this._headers}).then(function(res){return _this6._getResponseData(res);});}}]);return Api;}();var api=new Api({baseUrl:\"https://mesto.nomoreparties.co/v1/cohort-50\",headers:{authorization:\"0cd386ae-1830-42e7-aefa-1c5dfe1b78a1\",\"Content-Type\":\"application/json\"}});export default api;","map":{"version":3,"names":["Api","baseUrl","headers","_baseUrl","_cardsUrl","_userUrl","_avatarUrl","_likesUrl","_headers","res","ok","Promise","reject","status","json","fetch","then","_getResponseData","name","about","method","body","JSON","stringify","link","id","console","log","cardId","isNotLiked","api","authorization"],"sources":["/Users/alexandrkatsuro/Downloads/mesto-react/src/utils/Api.js"],"sourcesContent":["class Api {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    this._cardsUrl = `${this._baseUrl}/cards`;\n    this._userUrl = `${this._baseUrl}/users/me`;\n    this._avatarUrl = `${this._baseUrl}/users/me/avatar`;\n    this._likesUrl = `${this._baseUrl}/cards/cardId/likes`;\n    this._headers = headers;\n  }\n\n  _getResponseData(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n    return res.json();\n  }\n\n  //////// загружаем карточки с сервера\n  getInitialCards() {\n    return fetch(this._cardsUrl, {\n      headers: this._headers,\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //////// загружаем данные пользователя с сервера\n  getProfileData() {\n    return fetch(this._userUrl, {\n      headers: this._headers,\n    }).then((res) => this._getResponseData(res));\n  }\n\n\n  //метод сохранения отредактированных данных пользователя на сервере\n  setUserInfo({\n    name,\n    about\n  }) {\n    return fetch(this._userUrl, {\n        method: 'PATCH',\n        headers: this._headers,\n        body: JSON.stringify({\n          name: name,\n          about: about,\n        })\n      })\n      .then((res) => this._getResponseData(res));\n    }\n\n  \n\n  // //////// сохраняем данные пользователя (профиль) на сервере\n  // saveProfileInfo({ name, about }) {\n  //   return fetch(this._userUrl, {\n  //     method: \"PATCH\",\n  //     headers: this._headers,\n  //     body: JSON.stringify({\n  //       name: name,\n  //       about: about,\n  //     }),\n  //   }).then((res) => this._getResponseData(res));\n  // }\n\n  // //////// сохраняем аватар пользователя (профиль) на сервере\n  // saveProfileAvatar(src) {\n  //   return fetch(this._avatarUrl, {\n  //     method: \"PATCH\",\n  //     headers: this._headers,\n  //     body: JSON.stringify({\n  //       avatar: src.link,\n  //     }),\n  //   }).then((res) => this._getResponseData(res));\n  // }\n\n  //////// добавляем новую карточку на сервер\n  postNewCard({ name, link }) {\n    return fetch(this._cardsUrl, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        link: link,\n      }),\n    }).then((res) => this._getResponseData(res));\n  }\n\n  ///////удаление карточки пользователя с сервера\n  deleteCard(id) {\n    console.log(id);\n    return fetch(`${this._cardsUrl}/${id}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then((res) => this._getResponseData(res));\n  }\n\n  // ////////установка лайка карточке\n  // setLike(cardId) {\n  //   return fetch(`${this._cardsUrl}/${cardId}/likes`, {\n  //     method: \"PUT\",\n  //     headers: this._headers,\n  //   }).then((res) => this._getResponseData(res));\n  // }\n\n  // ////////удаление лайка с карточки\n  // removeLike(cardId) {\n  //   return fetch(`${this._cardsUrl}/${cardId}/likes`, {\n  //     method: \"DELETE\",\n  //     headers: this._headers,\n  //   }).then((res) => this._getResponseData(res));\n  // }\n  \n\n\n  changeLikeCardStatus(cardId, isNotLiked){\n    return fetch(`${this._cardsUrl}/${cardId}/likes`, {\n      method: isNotLiked ? \"PUT\" : \"DELETE\",\n      headers: this._headers,\n    })\n    .then((res) => this._getResponseData(res));\n}\n\n\n\n\n\n}\n\nconst api = new Api({\n  baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-50\",\n  headers: {\n    authorization: \"0cd386ae-1830-42e7-aefa-1c5dfe1b78a1\",\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default api;\n"],"mappings":"qQAAMA,I,yBACJ,kBAAkC,IAApBC,QAAoB,MAApBA,OAAoB,CAAXC,OAAW,MAAXA,OAAW,2BAChC,KAAKC,QAAL,CAAgBF,OAAhB,CACA,KAAKG,SAAL,WAAoB,KAAKD,QAAzB,WACA,KAAKE,QAAL,WAAmB,KAAKF,QAAxB,cACA,KAAKG,UAAL,WAAqB,KAAKH,QAA1B,qBACA,KAAKI,SAAL,WAAoB,KAAKJ,QAAzB,wBACA,KAAKK,QAAL,CAAgBN,OAAhB,CACD,C,gDAED,0BAAiBO,GAAjB,CAAsB,CACpB,GAAI,CAACA,GAAG,CAACC,EAAT,CAAa,CACX,MAAOC,QAAO,CAACC,MAAR,iDAA0BH,GAAG,CAACI,MAA9B,EAAP,CACD,CACD,MAAOJ,IAAG,CAACK,IAAJ,EAAP,CACD,CAED;+BACA,0BAAkB,gBAChB,MAAOC,MAAK,CAAC,KAAKX,SAAN,CAAiB,CAC3BF,OAAO,CAAE,KAAKM,QADa,CAAjB,CAAL,CAEJQ,IAFI,CAEC,SAACP,GAAD,QAAS,MAAI,CAACQ,gBAAL,CAAsBR,GAAtB,CAAT,EAFD,CAAP,CAGD,CAED;8BACA,yBAAiB,iBACf,MAAOM,MAAK,CAAC,KAAKV,QAAN,CAAgB,CAC1BH,OAAO,CAAE,KAAKM,QADY,CAAhB,CAAL,CAEJQ,IAFI,CAEC,SAACP,GAAD,QAAS,OAAI,CAACQ,gBAAL,CAAsBR,GAAtB,CAAT,EAFD,CAAP,CAGD,CAGD;2BACA,2BAGG,oBAFDS,KAEC,OAFDA,IAEC,CADDC,KACC,OADDA,KACC,CACD,MAAOJ,MAAK,CAAC,KAAKV,QAAN,CAAgB,CACxBe,MAAM,CAAE,OADgB,CAExBlB,OAAO,CAAE,KAAKM,QAFU,CAGxBa,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBL,IAAI,CAAEA,IADa,CAEnBC,KAAK,CAAEA,KAFY,CAAf,CAHkB,CAAhB,CAAL,CAQJH,IARI,CAQC,SAACP,GAAD,QAAS,OAAI,CAACQ,gBAAL,CAAsBR,GAAtB,CAAT,EARD,CAAP,CASC,CAIH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;2BACA,2BAA4B,oBAAdS,KAAc,OAAdA,IAAc,CAARM,IAAQ,OAARA,IAAQ,CAC1B,MAAOT,MAAK,CAAC,KAAKX,SAAN,CAAiB,CAC3BgB,MAAM,CAAE,MADmB,CAE3BlB,OAAO,CAAE,KAAKM,QAFa,CAG3Ba,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBL,IAAI,CAAEA,IADa,CAEnBM,IAAI,CAAEA,IAFa,CAAf,CAHqB,CAAjB,CAAL,CAOJR,IAPI,CAOC,SAACP,GAAD,QAAS,OAAI,CAACQ,gBAAL,CAAsBR,GAAtB,CAAT,EAPD,CAAP,CAQD,CAED;0BACA,oBAAWgB,EAAX,CAAe,iBACbC,OAAO,CAACC,GAAR,CAAYF,EAAZ,EACA,MAAOV,MAAK,WAAI,KAAKX,SAAT,aAAsBqB,EAAtB,EAA4B,CACtCL,MAAM,CAAE,QAD8B,CAEtClB,OAAO,CAAE,KAAKM,QAFwB,CAA5B,CAAL,CAGJQ,IAHI,CAGC,SAACP,GAAD,QAAS,OAAI,CAACQ,gBAAL,CAAsBR,GAAtB,CAAT,EAHD,CAAP,CAID,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;oCAIA,8BAAqBmB,MAArB,CAA6BC,UAA7B,CAAwC,iBACtC,MAAOd,MAAK,WAAI,KAAKX,SAAT,aAAsBwB,MAAtB,WAAsC,CAChDR,MAAM,CAAES,UAAU,CAAG,KAAH,CAAW,QADmB,CAEhD3B,OAAO,CAAE,KAAKM,QAFkC,CAAtC,CAAL,CAINQ,IAJM,CAID,SAACP,GAAD,QAAS,OAAI,CAACQ,gBAAL,CAAsBR,GAAtB,CAAT,EAJC,CAAP,CAKH,C,mBAQD,GAAMqB,IAAG,CAAG,GAAI9B,IAAJ,CAAQ,CAClBC,OAAO,CAAE,6CADS,CAElBC,OAAO,CAAE,CACP6B,aAAa,CAAE,sCADR,CAEP,eAAgB,kBAFT,CAFS,CAAR,CAAZ,CAQA,cAAeD,IAAf"},"metadata":{},"sourceType":"module"}